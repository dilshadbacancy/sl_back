flowchart TD
    Start([BARBER ROUTES - /barber]) --> R1["POST /login"]
    Start --> R2["GET /barber-profile"]
    Start --> R3["GET /barbers-appointments"]
    Start --> R4["POST /create-barber"]
    Start --> R5["POST /update-barber"]
    Start --> R6["GET /barbers/:id"]
    Start --> R7["POST /availability"]
    
    R1 --> R1Auth["ğŸ”“ NO Auth Required"]
    R1Auth --> R1Body["ğŸ“¥ REQUEST BODY:<br/>{ username: string,<br/>login_pin: string }"]
    R1Body --> R1Service["ğŸ”„ BarberService.loginBarber"]
    R1Service --> R1Response["ğŸ“¤ RESPONSE:<br/>{ success: true,<br/>message: 'Login successful',<br/>data: { barber_id,<br/>name, email,<br/>tokens } }"]
    
    R2 --> R2Auth["ğŸ” Middleware:<br/>barberAuthMiddleware"]
    R2Auth --> R2Header["ğŸ“¥ REQUEST HEADER:<br/>Authorization: Bearer token"]
    R2Header --> R2Service["ğŸ”„ BarberService.getBarbersProfile"]
    R2Service --> R2Response["ğŸ“¤ RESPONSE:<br/>{ success: true,<br/>data: { id, name,<br/>email, mobile,<br/>shop_id, gender,<br/>specialist_in[],<br/>available, status } }"]
    
    R3 --> R3Auth["ğŸ” Middleware:<br/>barberAuthMiddleware"]
    R3Auth --> R3Service["ğŸ”„ BarberService.getAllApointment"]
    R3Service --> R3Response["ğŸ“¤ RESPONSE:<br/>{ success: true,<br/>data: [{ id,<br/>customer_id,<br/>appointment_date,<br/>expected_start_time,<br/>expected_end_time,<br/>status, services[],<br/>customer{} }] }"]
    
    R4 --> R4Auth["ğŸ” Middleware:<br/>authMiddleware"]
    R4Auth --> R4Body["ğŸ“¥ REQUEST BODY:<br/>{ user_id: string,<br/>shop_id: string,<br/>name: string,<br/>email?: email,<br/>mobile: 10-digit,<br/>role?: enum,<br/>age?: number,<br/>gender: enum,<br/>specialist_in?: string[],<br/>status?: enum }"]
    R4Body --> R4Validation["âœ… Validation:<br/>- user_id required<br/>- shop_id required<br/>- name required<br/>- mobile 10 digits<br/>- Valid gender"]
    R4Validation --> R4Service["ğŸ”„ BarberService.createBarber"]
    R4Service --> R4Response["ğŸ“¤ RESPONSE:<br/>{ success: true,<br/>message: 'Barber added',<br/>data: { id, name,<br/>email, mobile,<br/>shop_id, status,<br/>gender } }"]
    
    R5 --> R5Auth["ğŸ” Middleware:<br/>authMiddleware"]
    R5Auth --> R5Body["ğŸ“¥ REQUEST BODY:<br/>{ id: UUID,<br/>name?: string,<br/>email?: email,<br/>mobile?: string,<br/>gender?: enum,<br/>specialist_in?: string[],<br/>status?: enum,<br/>age?: number }"]
    R5Body --> R5Service["ğŸ”„ BarberService.updateBarber"]
    R5Service --> R5Response["ğŸ“¤ RESPONSE:<br/>{ success: true,<br/>message: 'Barber updated',<br/>data: { id, name,<br/>email, mobile,<br/>updated_fields } }"]
    
    R6 --> R6Auth["ğŸ” Middleware:<br/>authMiddleware"]
    R6Auth --> R6Params["ğŸ“¥ ROUTE PARAMS:<br/>:id = shop_id (UUID)"]
    R6Params --> R6Query["ğŸ“¥ QUERY PARAMS:<br/>?available=true|false"]
    R6Query --> R6Service["ğŸ”„ BarberService.getAllBarbers"]
    R6Service --> R6Response["ğŸ“¤ RESPONSE:<br/>{ success: true,<br/>data: [{ id, name,<br/>email, mobile,<br/>specialist_in[],<br/>available, status,<br/>shop_id }] }"]
    
    R7 --> R7Auth["ğŸ” Middleware:<br/>authMiddleware"]
    R7Auth --> R7Body["ğŸ“¥ REQUEST BODY:<br/>{ id: UUID,<br/>available: boolean }"]
    R7Body --> R7Validation["âœ… Validation:<br/>- ID required<br/>- Available boolean"]
    R7Validation --> R7Service["ğŸ”„ BarberService.toggleAvailability"]
    R7Service --> R7Response["ğŸ“¤ RESPONSE:<br/>{ success: true,<br/>message: 'Availability changed',<br/>data: { id, available,<br/>updated_at } }"]
    
    style Start fill:#e3f2fd
    style R1 fill:#c8e6c9
    style R2 fill:#fff9c4
    style R3 fill:#ffccbc
    style R4 fill:#e1bee7
    style R5 fill:#b2dfdb
    style R6 fill:#ffe0b2
    style R7 fill:#f8bbd0
    style R1Response fill:#a5d6a7
    style R2Response fill:#fff59d
    style R3Response fill:#ffab91
    style R4Response fill:#ce93d8
    style R5Response fill:#80cbc4
    style R6Response fill:#ffcc80
    style R7Response fill:#f48fb1